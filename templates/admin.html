<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel de Administraci贸n</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script>
function abrirModal(src) {
    const modal = document.getElementById('modalImagen');
    const imgModal = document.getElementById('imgModal');
    imgModal.src = src;
    modal.classList.remove('hidden');
}

function cerrarModal() {
    document.getElementById('modalImagen').classList.add('hidden');
}
</script>

</head>
<body class="bg-gray-100 p-6">

<h1 class="text-2xl font-bold mb-4">Panel de Administraci贸n</h1>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
      {% for message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<table class="w-full border-collapse bg-white shadow">
    <thead>
        <tr class="bg-gray-200">
            <th class="border p-2">Nombre</th>
            <th class="border p-2">Descripci贸n</th>
            <th class="border p-2">Ubicaci贸n</th>
            <th class="border p-2">Contacto</th>
            <th class="border p-2">Foto</th>
            <th class="border p-2">Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for mascota in pendientes %}
        <tr>
            <td class="border p-2">{{ mascota[1] }}</td>
            <td class="border p-2">{{ mascota[2] }}</td>
            <td class="border p-2">{{ mascota[3] }}</td>
            <td class="border p-2">{{ mascota[4] }}</td>
            <td class="border p-2">
                {% if mascota[5] %}
                <img src="{{ url_for('static', filename='uploads/' ~ mascota[5]) }}" class="w-20" curasor="pointer" onclick="abrirModal(this.src)">
                {% else %}
                Sin foto
                {% endif %}
            </td>
            <td class="border p-2">
                <a href="{{ url_for('aprobar', id=mascota[0]) }}" class="bg-green-500 text-white px-3 py-1 rounded">Aprobar</a>
                <a href="{{ url_for('rechazar', id=mascota[0]) }}" class="bg-red-500 text-white px-3 py-1 rounded">Rechazar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
  <!-- Modal para imagen ampliada -->
<div id="modalImagen" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 cursor-pointer" onclick="cerrarModal()">
    <img id="imgModal" class="max-w-4xl max-h-full rounded shadow-lg" src="" alt="Imagen ampliada">
</div>

</body>
</html>
